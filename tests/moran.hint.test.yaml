schema: moran
source_dir: ..
script: |
  function eq(left, right)
    print('Left  = ' .. tostring(left))
    print('Right = ' .. tostring(right))
    return left == right
  end

deploy:
  # åªæœ‰ç°¡å¿«ç¢¼æç¤º
  qchint:
    patch:
      moran/enable_quick_code_hint: true
      moran/quick_code_indicator: "ğŸ’¥"
    tests:
      - send: a
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "ğŸ’¥aa")
      - send: aa{Control+t}
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "ğŸ“Œ Â¦ ğŸ’¥a")
      - send: yyteer
        assert: cand[1].text == "è‹±ç‰¹çˆ¾" and eq(cand[1].comment, "ğŸ’¥yte")
  # åªæœ‰ç°¡å¿«ç¢¼æç¤ºï¼Œé—œé–‰ç°¡å¿«ç¢¼æç¤ºç¬¦çš„æƒ…å½¢
  qchint-indicator:
    patch:
      moran/enable_quick_code_hint: true
      moran/quick_code_indicator: ""
    tests:
      - send: a
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "aa")
      - send: aa{Control+t}
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "ğŸ“Œ Â¦ a")
      - send: yyteer
        assert: cand[1].text == "è‹±ç‰¹çˆ¾" and eq(cand[1].comment, "yte")

  # åªæœ‰è¼”åŠ©ç¢¼æç¤º
  auxhint:
    patch:
      moran/enable_aux_hint: true
      moran/quick_code_indicator: "ğŸ’¥"
    tests:
      - send: a
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "kağŸ’¥")
      - send: aa{Control+t}
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "ğŸ“Œ Â¦ ka")
      - send: yyteer
        assert: cand[1].text == "è‹±ç‰¹çˆ¾" and eq(cand[1].comment, "")
  # åªæœ‰è¼”åŠ©ç¢¼æç¤ºï¼Œé—œé–‰ç°¡å¿«ç¢¼æç¤ºç¬¦çš„æƒ…å½¢
  auxhint-indicator:
    patch:
      moran/enable_aux_hint: true
      moran/quick_code_indicator: ""
    tests:
      - send: a
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "ka")
      - send: aa{Control+t}
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "ğŸ“Œ Â¦ ka")
      - send: yyteer
        assert: cand[1].text == "è‹±ç‰¹çˆ¾" and eq(cand[1].comment, "")
  # åªæœ‰è¼”åŠ©ç¢¼æç¤ºï¼Œé–‹å•“è©è¼”çš„æƒ…å½¢
  auxhint+wordfilter:
    patch:
      moran/quick_code_indicator: "ğŸ’¥"
      moran/enable_aux_hint: true
      moran/enable_word_filter: true
    tests:
      - send: lmjx
        assert: cand[1].text == "éˆæ¥" and eq(cand[1].comment, "jf")
      - send: lmjxz
        assert: cand[1].text == "é€£æ¥" and eq(cand[1].comment, "zf")

  # åŒæ™‚é–‹å•“ç°¡å¿«ç¢¼å’Œè¼”åŠ©ç¢¼æç¤ºå’Œè©è¼”
  qchint+auxhint+wordfilter:
    patch:
      moran/quick_code_indicator: "ğŸ’¥"
      moran/word_filter_match_indicator: "ğŸ¯"
      moran/enable_quick_code_hint: true
      moran/enable_aux_hint: true
      moran/enable_word_filter: true
    tests:
      - send: a
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "kağŸ’¥aa")
      - send: aa{Control+t}
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "ğŸ“Œ Â¦ kağŸ’¥a")
      - send: k
        assert: cand[1].text == "å¯" and eq(cand[1].comment, "dkğŸ’¥")
      - send: rugo
        assert: cand[1].text == "å¦‚æœ" and eq(cand[1].comment, "na Â¦ ğŸ’¥rg")
      - send: lmjx
        assert: cand[1].text == "éˆæ¥" and eq(cand[1].comment, "jf Â¦ ğŸ’¥lj")
      - send: lmjxf
        assert: cand[1].text == "éˆæ¥" and eq(cand[1].comment, "ğŸ¯ Â¦ ğŸ’¥lj")
      - send: lmjxz
        assert: cand[1].text == "é€£æ¥" and eq(cand[1].comment, "ğŸ¯")
  qchint+auxhint+wordfilter-indicator:
    patch:
      moran/quick_code_indicator: ""
      moran/word_filter_match_indicator: ""
      moran/enable_quick_code_hint: true
      moran/enable_aux_hint: true
      moran/enable_word_filter: true
    tests:
      - send: a
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "kaâš¡aa")
      - send: aa{Control+t}
        assert: cand[1].text == "å•Š" and eq(cand[1].comment, "ğŸ“Œ Â¦ kaâš¡a")
      - send: k
        assert: cand[1].text == "å¯" and eq(cand[1].comment, "dk")
      - send: rugo
        assert: cand[1].text == "å¦‚æœ" and eq(cand[1].comment, "na Â¦ rg")
      - send: rg
        assert: cand[1].text == "å¦‚æœ" and eq(cand[1].comment, "")
      - send: lmjx
        assert: cand[1].text == "éˆæ¥" and eq(cand[1].comment, "jf Â¦ lj")
      - send: lmjxf
        assert: cand[1].text == "éˆæ¥" and eq(cand[1].comment, "lj")
      - send: lmjxz
        assert: cand[1].text == "é€£æ¥" and eq(cand[1].comment, "")

# yaml-language-server: $schema=https://raw.githubusercontent.com/rimeinn/mira/refs/heads/master/spec/mira.schema.json
