schema:
  schema_id: moran_aux
  name: é­”ç„¶Â·è¼”ç¯©
  version: "20250214"
  author:
    - è‡ªç„¶ç¢¼ç™¼æ˜äººï¼šå‘¨å¿—è¾²
    - æ–¹æ¡ˆè£½ä½œï¼šksqsf
  description: |
    åœ¨è¼¸å…¥å®Œç•¢é›™æ‹¼ç¢¼å¾Œï¼Œå¯ä»¥è¼¸å…¥è¼”åŠ©ç¢¼ç¯©é¸å€™é¸é …ï¼Œèˆ‡ã€Œé­”ç„¶ã€æ–¹æ¡ˆä¸åŒã€‚
  dependencies:
    - tiger
    - moran_charset
    - moran_english
    #- moran_japanese

switches:
  - name: ascii_mode
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: extended_charset
    states: [ é€šç”¨, å¢å»£ ]
  - name: emoji
    states: [ ğŸˆš, ğŸˆ¶ ]
  - name: chaifen
    states: [ ä¸æ‹†, æ‰Œæ–¥ ]
  - name: unicode_comment
    states: [ Ué—œ, Ué–‹ ]
  - name: dzing
    states: [ é€š, å¯ ]
  - options: [ std_opencc,  std_tw, std_hk, std_dzing ]
    states: [ é€š, è‡º, æ¸¯, å¯ ]

engine:
  processors:
    - key_binder
    - lua_processor@*moran_pin*pin_processor
    - ascii_composer
    - recognizer
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - matcher@recognizer_secondary
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator@reverse_tick
    - reverse_lookup_translator@reverse_universal
    - reverse_lookup_translator@reverse_tiger
    - reverse_lookup_translator@reverse_stroke
    - reverse_lookup_translator@reverse_cangjie5
    - reverse_lookup_translator@reverse_zrlf
    - table_translator@custom_phrase        # è‡ªå®šç¾©çŸ­èª
    #- table_translator@english             # è‹±èªæ··è¼¸
    #- table_translator@japanese            # æ—¥èªæ··è¼¸
    #- table_translator@fixed               # æ›æ¥ç”¨æ³•
    - lua_translator@*moran_aux_translator
    - lua_translator@*moran_pin*panacea_translator
  filters:
    - lua_filter@*moran_hint_filter@auxfilter
    - lua_filter@*moran_charset_filter
    - lua_filter@*moran_fix_filter
    - lua_filter@*moran_pin*pin_filter
    - simplifier@emoji
    - simplifier@chaifen
    - simplifier
    - simplifier@std_tw
    - simplifier@std_hk
    - simplifier@std_dzing
    - uniquifier

speller:
  alphabet: abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/
  delimiter: " '"
  aux_algebra:
    __append:
      - derive/^(.*);(\w)(\w)$/$1/
  algebra:
    __patch:
      - moran:/algebra/user_force_top?
      - moran:/algebra/user_sentence_top?
      - :/speller/aux_algebra
      - moran:/algebra/user_sentence_bottom?
      - moran:/algebra/user_force_bottom?

translator:
  dictionary: moran.extended
  prism: moran_aux
  initial_quality: 5
  preedit_format:
    - xform/([a-z][a-z][a-z][a-z])o/$1Â°/

custom_phrase: # è‡ªå®šç¾©çŸ­èª
  dictionary: ""
  user_dict: moran_custom_phrases
  db_class: stabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 10

# æ›æ¥ç”¨æ³•ï¼Œéœ€è§£é™¤ translators ä¸­å°æ‡‰çš„è¨»é‡‹
fixed:
  dictionary: moran_fixed
  initial_quality: 10
  enable_completion: false
  enable_sentence: false
  enable_user_dict: false
  enable_encoder: false
  encode_commit_history: true

english:
  tag: english  # librime<=1.11 è«‹åœ¨ custom ä¸­ç½®ç©º
  dictionary: moran_english
  enable_user_dict: true
  enable_completion: true
  enable_sentence: false
  initial_quality: 0
  comment_format:
    - xform/~[A-Za-z]*//

japanese:
  dictionary: moran_japanese
  enable_completion: false
  enable_sentence: true
  initial_quality: 0

simplifier:
  option_name: simplification
  opencc_config: moran_t2s.json

emoji:
  opencc_config: moran_emoji.json
  option_name: emoji
  tips: all

chaifen:
  option_name: chaifen
  opencc_config: moran_chaifen.json
  tips: char
  show_in_comment: true
  inherit_comment: true
  comment_format:
    - "xform/-/ /"
    - "xform/ã€•ã€”/ï½œ/"

std_hk:
  opencc_config: t2hk.json
  option_name: std_hk

std_tw:
  opencc_config: t2tw.json
  option_name: std_tw

std_dzing:
  opencc_config: moran_dzing.json
  option_name: std_dzing
  tips: all

reverse_format:
  comment_format:
    - xform/(\w\w);(\w\w)/$1[$2]/
  preedit_format:
    - xform/^o(lf|bh|cj|vy|hm)//

reverse_tiger:
  tag: reverse_tiger
  dictionary: tiger
  enable_completion: true
  prefix: "ohm"
  tips: ã€”è™ç¢¼ã€•
  __include: reverse_format

reverse_universal:
  tag: reverse_universal
  dictionary: moran.chars
  tips: ã€”é€šé…ã€•
  __include: reverse_format

reverse_stroke:
  tag: reverse_stroke
  dictionary: stroke
  prefix: "obh"
  enable_completion: true
  tips: ã€”æ©«hè±sæ’‡pæºnæŠ˜zã€•
  __include: reverse_format

reverse_cangjie5:
  tag: reverse_cangjie5
  dictionary: cangjie5
  prefix: "ocj"
  enable_completion: true
  tips: ã€”å€‰é ¡äº”ä»£ã€•
  __include: reverse_format

reverse_zrlf:
  tag: reverse_zrlf
  dictionary: zrlf
  prefix: "olf"
  enable_completion: true
  tips: ã€”å…©åˆ†ã€•
  __include: reverse_format

reverse_tick:
  __include: reverse_tiger
  tag: reverse_tick
  prefix: "`"

reverse_lookup:
  extra_tags:
    - reverse_tiger
    - reverse_universal
    - reverse_stroke
    - reverse_cangjie5
    - reverse_zrlf
    - reverse_tick

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  custom_bindings:
    __append:
      # åœ¨é€™è£æ·»åŠ åªåœ¨æœ¬æ–¹æ¡ˆä¸­ç”Ÿæ•ˆçš„æŒ‰éµç¶å®š
  bindings:
    __patch:
      - :/key_binder/custom_bindings?
      - moran:/key_bindings/moran_switches
      - moran:/key_bindings/moran_tab
      - moran:/key_bindings/moran_semicolon_for_2
      - moran:/key_bindings/moran_keypad

recognizer:
  import_preset: default
  patterns:
    punct: '^/([0-9]0?|[A-Za-z]+)$'
    # åæŸ¥
    reverse_universal: "(^(`[a-z`]+))|(^([a-z]{2}(`[a-z`]?|[a-z`]`)))"
    reverse_tick: "(^`$)|(^`[a-zA-Z]+$)"
    reverse_tiger: "^ohm[a-z]+$"
    reverse_stroke: "^obh[a-z]*$"
    reverse_cangjie5: "^ocj[a-z]*$"
    reverse_zrlf: "^olf[a-z]*$"

recognizer_secondary:
  patterns:
    # {4} è¡¨ç¤ºè¼¸å…¥é•·åº¦é”åˆ° 4 å¾Œé–‹å§‹è¼¸å‡ºè‹±èª
    english: '^[A-Za-z]{4}[A-Za-z]*'

moran:
  # é å–å€‹æ•¸
  # è¨­ç½®çˆ²å°æ–¼ç­‰æ–¼ 0 çš„æ•¸ç›¸ç•¶æ–¼ç„¡é™åˆ¶ã€‚
  # è¨­ç½®çˆ²æ­£æ•¸æ™‚ï¼šæ•¸å­—è¶Šå°ï¼Œé€Ÿåº¦è¶Šå¿«ï¼Œè¢«è¼”åˆ°çš„å­—è¶Šå°‘ï¼›
  #               æ•¸å­—è¶Šå¤§ï¼Œé€Ÿåº¦è¶Šæ…¢ï¼Œèƒ½è¢«è¼”åˆ°å­—å°±è¶Šå¤šã€‚
  # é»˜èªçˆ²ç„¡é™åˆ¶ã€‚
  # å¦‚æœåœ¨æŸäº›æ€§èƒ½è¼ƒä½çš„è¨­å‚™ä¸Šä½¿ç”¨æ™‚æ„Ÿåˆ°å¡é “ï¼Œå¯ä»¥è¨­ç½®çˆ² 50 æˆ–æ›´å°çš„æ•¸å­—ã€‚
  # å¦‚æœæ„Ÿåˆ°è¢«è¼”ç”Ÿåƒ»å­—éå¤šï¼Œä¹Ÿå¯ä»¥è€ƒæ…®è¨­ç½®çˆ²è¼ƒå°çš„æ•¸å­—ã€‚
  prefetch: -1

  # å›ºå®šä¸€äºŒç´šç°¡ç¢¼ã€‚åƒè€ƒè¨­ç½®ï¼š
  quick_code_indicator: "âš¡"
  fix:
    d: çš„
    l: äº†
    j: å°±

  # é¦–é¸å›ºå®šçˆ²å¥å­ï¼Œä½¿å¾—åœ¨è¼¸å…¥é•·å¥æ™‚ï¼Œé¦–é¸çš„é•·åº¦ä¸æœƒè·³è®Š
  # ä¾‹å¦‚ï¼Œè¼¸å…¥ã€Œä¸å¤ªç†è§£ã€è¼¸å…¥åˆ° "bu tl l" æ™‚ï¼Œ
  # è‹¥çˆ² falseï¼Œå‰‡é¦–é¸å¯èƒ½æ˜¯ã€Œéƒ¶ã€ï¼ˆl è¼”åŠ©ç¢¼ç”Ÿæ•ˆï¼‰
  # è‹¥çˆ² trueï¼Œå‰‡é¦–é¸æ˜¯ã€Œä¸å¤ªå†·ã€ï¼ˆbu tl l è¢«è¦–ä½œé›™æ‹¼ï¼‰ï¼Œæ¬¡é¸å¯èƒ½æ˜¯ã€Œéƒ¶ã€ï¼ˆl è¼”åŠ©ç¢¼ç”Ÿæ•ˆï¼‰
  sentence_priority: true
  # å¥å­å„ªå…ˆçš„ç”Ÿæ•ˆé•·åº¦
  # åªæœ‰åœ¨å¥å­è¼¸å‡ºå¤§æ–¼è©²é•·åº¦æ™‚ï¼Œå¥å­æ‰æœƒè¢«å‰ç½®ã€‚
  # ä¾‹å¦‚ï¼Œè¦è¼¸å…¥ã€Œå“ªå€‹ã€æ™‚è¼¸å…¥ nagekï¼Œé¦–å…ˆè¢«å˜—è©¦ç†è§£çˆ² na'ge'kï¼Œè¼¸å‡ºä¸‰å€‹å­—ã€‚
  # è‹¥è¨­çˆ² 4ï¼Œå°±å¯ä»¥ä¿è­‰ nagek çš„é¦–é€‰å‡ºç¾ã€Œå“ªå€‹ã€ï¼Œè€Œä¸æ˜¯ä¸‰å€‹å­—çš„å€™é¸ã€‚
  # è‹¥è¨­çˆ² 0ï¼Œå‰‡è¡¨ç¤ºä¸åŠ é™åˆ¶ã€æ°¸é é–‹å•“ã€‚
  sentence_priority_length: 0

  # å››ç¢¼æ™‚æ˜¯å¦å„ªå…ˆå–®å­—
  # â€» è©²è¨­ç½®å„ªå…ˆç´šé«˜æ–¼ word_over_char_tolerance
  #    è‹¥æœ¬é¸é …çˆ² trueï¼Œå³ä½¿ word_over_char_tolerance å¤§æ–¼ 0ï¼Œå››ç¢¼ä»ç„¶æ˜¯å–®å­—å„ªå…ˆã€‚
  char_priority: false

  # å…è¨±å¤šå°‘è©å‡ºç¾åœ¨è¢«è¼”å€™é¸ä¹‹å‰ï¼Œå½±éŸ¿è¼¸å…¥é•·åº¦çˆ²å¶æ•¸çš„æƒ…æ³
  # è¢«è¼”å–®å­—å¤ªå¤šçš„æƒ…æ³ä¸‹ï¼Œä¾‹å¦‚ ji'dj li'hl ç­‰ï¼Œå…è¨±ä¸€äº›è©å‡ºç¾åœ¨é€™äº›å­—ä¹‹å‰ã€‚
  # è‹¥è¨­çˆ² 0ï¼Œç›¸ç•¶æ–¼è¢«è¼”å€™é¸æ°¸é åœ¨æœ€å‰ï¼Œè¼¸å…¥ xibk æ™‚é¦–é¸æœƒæ˜¯ã€Œå…®ã€è€Œä¸æ˜¯ç´°èƒã€‚
  # è‹¥è¨­çˆ² 1ï¼Œç›¸ç•¶æ–¼è¢«è¼”å€™é¸æœƒå‡ºç¾åœ¨æ¬¡é¸ã€‚
  # å¿…é ˆæ˜¯æ­£æ•´æ•¸ã€‚
  #
  # â€» è©²è¨­ç½®å„ªå…ˆç´šä½æ–¼ single_char_input_lenã€‚
  #    å¦‚æœæœ¬è¨­ç½®å¤§æ–¼ 0ï¼Œè€Œ single_char_input_len=4 ï¼Œå‰‡
  word_over_char_tolerance: 2
  # æ˜¯å¦å…è¨±è¢«è¼”å€™é¸å’Œæ’å…¥è©èªä¹‹é–“èª¿é »
  # åƒ…åœ¨ç•¶ word_over_char_tolerance > 0 æ™‚æœ‰æ•ˆ
  # å¦‚ doxx å­˜åœ¨ã€Œå¤šè¬ã€å’Œã€Œå¤šã€å…©å€‹å€™é¸ï¼Œå…·é«”é †åºä¾æ“šç”¨æˆ¶ä½¿ç”¨é »ç‡è€Œå®šã€‚
  # è‹¥è¨­ç½®çˆ² trueï¼Œã€Œå¤šè¬ã€å¯èƒ½å‡ºç¾åœ¨ã€Œå¤šã€ä¹‹å‰ï¼Œä¹Ÿå¯èƒ½å‡ºç¾åœ¨ã€Œå¤šã€ä¹‹å¾Œã€‚
  # è‹¥è¨­ç½®çˆ² falseï¼Œå‰‡è©èªç„¡æ¢ä»¶å‡ºç¾åœ¨è¢«è¼”å€™é¸ä¹‹å‰ã€‚
  word_over_char_adaptive: true

  # è¼¸å…¥è¼”åŠ©ç¢¼æ™‚ï¼ŒåŸä¾†åŒ¹é…çš„é¦–é¸å¾Œç§»
  # â€» è©²é¸é …ä¹Ÿå°è©èªç”Ÿæ•ˆã€‚
  #
  # ä¾‹å¦‚ï¼Œå‡è¨­è¼¸å…¥ he çš„é¦–é¸æ˜¯ã€Œå–ã€ï¼Œ
  # å¦‚æœé€²ä¸€æ­¥è¼¸å…¥ kï¼Œæœ‰å¾ˆå¤§å¯èƒ½æ„å‘³ç€æˆ‘å€‘æƒ³æ‰¾ä¸€å€‹ä¸æ˜¯ã€Œå–ã€çš„å­—ã€‚
  # é‚£éº¼ã€Œå–ã€æ‡‰è©²è¢«å»¶é²åˆ°è‹¥å¹²é¸é …ä¹‹å¾Œã€‚
  #
  # æ³¨æ„ï¼Œè©²åŠŸèƒ½ä¸å½±éŸ¿åƒ…è¼¸å…¥ä¸€ç¢¼æˆ–äºŒç¢¼æ™‚çš„è¡Œçˆ²ï¼Œ
  # å³è‹¥ h çš„é¦–é¸æ˜¯ã€Œå–ã€ï¼Œå‰‡è¼¸å…¥ he çš„é¦–é¸ä¾ç„¶æ˜¯ã€Œå–ã€ã€‚
  # è‹¥éœ€è¦æ”¹è®Šæ­¤è¡Œçˆ²ï¼Œå¯ä»¥åƒç…§ä¸Šæ–¹çš„ä¸€äºŒç´šç°¡ç¢¼è¨­ç½®ã€‚
  #
  # è‹¥çˆ² trueï¼Œå‰‡åŸä¾†åŒ¹é…çš„å€™é¸è¢«å»¶é²åˆ°è‹¥å¹²é¸é …ä¹‹å¾Œã€‚
  # ï¼ˆå»¶é²å€™é¸çš„å€‹æ•¸ç”± aux_priority_defer æŒ‡å®šã€‚ï¼‰
  # è‹¥çˆ² falseï¼Œå‰‡ hek ä¸€å®šä»ç„¶æ˜¯ã€Œå–ã€ã€‚
  aux_priority: true
  # å»¶é²å¤šå°‘ä½
  aux_priority_defer: 2
  # è¨­å®š aux_priority ä½œç”¨æ™‚çš„è¼”åŠ©ç¢¼é•·åº¦
  # è‹¥çˆ² 1ï¼Œè¡¨ç¤ºå…è¨± he -> hek æ™‚é™æ¬Šã€Œå–ã€å­—ï¼Œå³å¾äºŒç¢¼è¼¸å…¥ä¸€ç¢¼åˆ°ä¸‰ç¢¼æ™‚ã€‚
  # è‹¥çˆ² 2ï¼Œè¡¨ç¤ºå…è¨± hek -> hekh æ™‚é™æ¬Šã€Œå–ã€å­—ï¼Œå³å¾ä¸‰ç¢¼è¼¸å…¥ä¸€ç¢¼åˆ°å››ç¢¼æ™‚ã€‚
  # å…¶ä»–ä»»ä½•æ•¸å­—éƒ½æ˜¯ç„¡æ•ˆè¼¸å…¥ã€‚
  aux_priority_length: 1
  # å¦‚æœå€™é¸è¢«å¾Œç§»ï¼Œå¢åŠ ä¸€å€‹æç¤ºç¬¦ã€‚
  aux_priority_indicator: "â–¾"

  # è¼”åŠ©ç¢¼ä½œç”¨ä½ç½®
  # æ³¨ï¼šè¼”ç¯©æ¨¡å¼ç„¡è«–å¦‚ä½•éƒ½æ˜¯åœ¨ *é¦–å€‹è©èª* ä¸Šé€²è¡Œç¯©é¸ã€‚
  # æœ¬é…ç½®åªå½±éŸ¿å–ç”¨å“ªå€‹è¼”åŠ©ç¢¼
  # firstï¼šé¦–å­—
  # lastï¼šæœ«å­—
  # anyï¼šä»»æ„å­—
  aux_position: any

  # è¼”åŠ©ç¢¼æç¤º
  # æ ¼å¼çˆ²ï¼š<åŒ¹é…çš„è¼”åŠ©ç¢¼> Â¦ <è©å…¸ä¸­çš„è¼”åŠ©ç¢¼>
  # è©²åŠŸèƒ½ä¸é¡¯ç¤ºæ‹†åˆ†ï¼Œå»ºè­°ä½¿ç”¨ Ctrl+i é¡¯ç¤ºå–®å­—æ‹†åˆ†
  enable_aux_hint: false

  # ã€Œç½®é ‚ã€åŠŸèƒ½ç›¸é—œè¨­ç½®
  # è¼¸å…¥æ™‚é€šéå¿«æ·éµ Ctrl+t å¯ä»¥å°‡é«˜äº®é¡¯ç¤ºçš„å€™é¸ç½®é ‚ï¼Œè¢«ç½®é ‚çš„å€™é¸ä½ç½®å›ºå®šï¼Œä¸å†åƒèˆ‡èª¿é »
  # å°åŒä¸€è¼¸å…¥ç¢¼æœ€é«˜æ”¯æŒ8å€‹ç½®é ‚è©ï¼Œç•¶å˜—è©¦ç½®é ‚ç¬¬9å€‹è©æ™‚ï¼Œæœ€æ—©è¢«ç½®é ‚çš„è©å°‡æœƒå¤±æ•ˆ
  pin:
    # ã€Œç½®é ‚ã€åŠŸèƒ½é–‹é—œ
    enable: true
    # ç½®é ‚è©æç¤ºç¬¦
    indicator: "ğŸ“Œ"
    # ã€Œè¬éˆè—¥ã€åŠ è©åŠŸèƒ½
    # é€šéè¼¸å…¥ ã€Œç·¨ç¢¼Aã€//ã€Œç·¨ç¢¼Bã€ å¯¦ç¾é€ è©åŠŸèƒ½ï¼Œç·¨ç¢¼Aæ˜¯é€™å€‹æ–°è©çš„æ–°ç·¨ç¢¼ ç·¨ç¢¼Bæ˜¯ç›®å‰å¯ä»¥æ‰“å‡ºè©²è©çš„ç·¨ç¢¼
    # ä¾‹å¦‚ è¼¸å…¥ tnfb ä¸èƒ½å¾—åˆ°ã€Œé ­è…¦é¢¨æš´ã€é€™ä¸€å€™é¸ï¼Œ æ­¤æ™‚æˆ‘å€‘å¯ä»¥è¼¸å…¥ tnfb//tbnkfgbk æŒ‰ä¸‹ç©ºæ ¼ è®“ã€Œé ­è…¦é¢¨æš´ã€å€™é¸ä¸Šå±ï¼Œä¸Šå±çš„è©æœƒè¢«åŠ å…¥ç”¨æˆ¶è©åº«ä¸­ï¼Œä¹‹å¾Œæˆ‘å€‘å¯ä»¥ç”¨ tnfb ä¾†å¾—åˆ°ã€Œé ­è…¦é¢¨æš´ã€é€™ä¸€å€™é¸äº†
    # é€ å‡ºçš„è©èˆ‡ç½®é ‚è©æ˜¯ç­‰åŒçš„
    panacea:
      # åŠ è©ç‹€æ…‹æç¤º
      prompt: "ã€”åŠ è©ã€•"
      # åŠ è©ä¸­ç¶´å¼•å°ç¬¦
      infix: "//"
      # è‡ªç”±åŠ è©æ¨¡å¼é–‹é—œï¼Œé–‹å•“æ­¤æ¨¡å¼å¾Œï¼Œè¼¸å…¥ã€Œç·¨ç¢¼Aã€//ä¸¦ç©ºæ ¼ä¸Šå±å¾Œæœƒé€²å…¥åŠ è©ç‹€æ…‹ï¼Œæ­¤æ™‚å¯ä»¥é€£çºŒåœ°ã€ä¸å—æŸç¸›åœ°è¼¸å…¥ï¼Œå†æ¬¡æŒ‰ä¸‹x//ç©ºæ ¼é€€å‡ºåŠ è©ç‹€æ…‹ï¼ŒæœŸé–“è¼¸å…¥çš„å…§å®¹å°‡æœƒè¢«è¨˜éŒ„çˆ²ã€Œç·¨ç¢¼Aã€çš„æ–°ç½®é ‚è©
      # æ­¤æ¨¡å¼é©åˆé€ ä¸€äº›æ··åˆè©ï¼Œå¦‚ã€ŒA4ç´™ã€ã€ã€ŒKOS-MOSã€ç­‰
      freestyle: false

# é»˜èªå•“ç”¨èªè¨€æ¨¡å‹
__include: moran:/octagram/enable_for_sentence
